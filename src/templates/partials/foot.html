<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="//code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
  crossorigin="anonymous"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1"
  crossorigin="anonymous"></script>

<script>
  // Select all links with hashes
  $('a[href*="#"]')
    // Remove links that don't actually link to anything
    .not('[href="#"]')
    .not('[href="#0"]')
    .click(function (event) {
      // On-page links
      if (
        location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') &&
        location.hostname == this.hostname
      ) {
        // Figure out element to scroll to
        var target = $(this.hash);
        target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
        // Does a scroll target exist?
        if (target.length) {
          // Only prevent default if animation is actually gonna happen
          event.preventDefault();
          $('html, body').animate({
            scrollTop: target.offset().top
          }, 1000, function () {
            // Callback after animation
            // Must change focus!
            var $target = $(target);
            $target.focus();
            if ($target.is(":focus")) { // Checking if the target was focused
              return false;
            } else {
              $target.attr('tabindex', '-1'); // Adding tabindex for elements not focusable
              $target.focus(); // Set focus again
            };
          });
        }
      }
    });
</script>

<script>
  $('.menu-toggler').on('click', function () {
    $('.nav').slideToggle();
  });
</script>

<script>
  /**
   * @author       Rob W <gwnRob@gmail.com>
   * @website      https://stackoverflow.com/a/7513356/938089
   * @version      20131010
   * @description  Executes function on a framed YouTube video (see website link)
   *               For a full list of possible functions, see:
   *               https://developers.google.com/youtube/js_api_reference
   * @param String frame_id The id of (the div containing) the frame
   * @param String func     Desired function to call, eg. "playVideo"
   *        (Function)      Function to call when the player is ready.
   * @param Array  args     (optional) List of arguments to pass to function func*/
  function callPlayer(frame_id, func, args) {
    if (window.jQuery && frame_id instanceof jQuery) frame_id = frame_id.get(0).id;
    var iframe = document.getElementById(frame_id);
    if (iframe && iframe.tagName.toUpperCase() != 'IFRAME') {
      iframe = iframe.getElementsByTagName('iframe')[0];
    }

    // When the player is not ready yet, add the event to a queue
    // Each frame_id is associated with an own queue.
    // Each queue has three possible states:
    //  undefined = uninitialised / array = queue / 0 = ready
    if (!callPlayer.queue) callPlayer.queue = {};
    var queue = callPlayer.queue[frame_id],
      domReady = document.readyState == 'complete';

    if (domReady && !iframe) {
      // DOM is ready and iframe does not exist. Log a message
      window.console && console.log('callPlayer: Frame not found; id=' + frame_id);
      if (queue) clearInterval(queue.poller);
    } else if (func === 'listening') {
      // Sending the "listener" message to the frame, to request status updates
      if (iframe && iframe.contentWindow) {
        func = '{"event":"listening","id":' + JSON.stringify('' + frame_id) + '}';
        iframe.contentWindow.postMessage(func, '*');
      }
    } else if (!domReady ||
      iframe && (!iframe.contentWindow || queue && !queue.ready) ||
      (!queue || !queue.ready) && typeof func === 'function') {
      if (!queue) queue = callPlayer.queue[frame_id] = [];
      queue.push([func, args]);
      if (!('poller' in queue)) {
        // keep polling until the document and frame is ready
        queue.poller = setInterval(function () {
          callPlayer(frame_id, 'listening');
        }, 250);
        // Add a global "message" event listener, to catch status updates:
        messageEvent(1, function runOnceReady(e) {
          if (!iframe) {
            iframe = document.getElementById(frame_id);
            if (!iframe) return;
            if (iframe.tagName.toUpperCase() != 'IFRAME') {
              iframe = iframe.getElementsByTagName('iframe')[0];
              if (!iframe) return;
            }
          }
          if (e.source === iframe.contentWindow) {
            // Assume that the player is ready if we receive a
            // message from the iframe
            clearInterval(queue.poller);
            queue.ready = true;
            messageEvent(0, runOnceReady);
            // .. and release the queue:
            while (tmp = queue.shift()) {
              callPlayer(frame_id, tmp[0], tmp[1]);
            }
          }
        }, false);
      }
    } else if (iframe && iframe.contentWindow) {
      // When a function is supplied, just call it (like "onYouTubePlayerReady")
      if (func.call) return func();
      // Frame exists, send message
      iframe.contentWindow.postMessage(JSON.stringify({
        "event": "command",
        "func": func,
        "args": args || [],
        "id": frame_id
      }), "*");
    }
    /* IE8 does not support addEventListener... */
    function messageEvent(add, listener) {
      var w3 = add ? window.addEventListener : window.removeEventListener;
      w3 ?
        w3('message', listener, !1) :
        (add ? window.attachEvent : window.detachEvent)('onmessage', listener);
    }
  }
</script>

<script>
  $('#video-modal').on('show.bs.modal', function (e) {
    callPlayer("youtube-video-identifier", function() {
      // This function runs once the player is ready ("onYouTubePlayerReady")
      callPlayer("youtube-video-identifier", "playVideo");
    });
  });

  $('#video-modal').on('hidden.bs.modal', function (e) {
    callPlayer("youtube-video-identifier", function() {
      // This function runs once the player is ready ("onYouTubePlayerReady")
      callPlayer("youtube-video-identifier", "pauseVideo");
    });
  });
</script>
